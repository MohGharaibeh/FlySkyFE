<style>
  button:hover {
    transform: scale(1.1)
  }
  button {
    transition: all .5s;
  }
</style>
<div class="wrapper" >
    <app-sidebar></app-sidebar>
    <div class="main-panel" style="position: relative;">
    <app-navbar ></app-navbar>
    <div class="content" style="margin-bottom: 40px;">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12">
            <button  (click)="openCreateDialog()" style="display: block; background-color: #04aa6d; color: white;" mat-raised-button>Add one!</button>
            <br>
            <form (submit)="onSearch()" style="text-align: center; max-width: 400px; margin: 10px 0; padding: 20px; border: 1px solid #ccc; border-radius: 10px; background-color: #f9f9f9;">

              <label for="departulDate" style="display: inline-block; margin-right: 10px; margin-bottom: 5px;">Start Date</label>
              <input type="date" id="departulDate" name="departulDate" [(ngModel)]="departulDate" style="padding: 8px; width: calc(100% - 30px); border: 1px solid #ccc; border-radius: 5px; display: inline-block;">
          
              <br>
          
              <label for="arrivelDate" style="display: inline-block; margin-right: 10px; margin-bottom: 5px;">End Date</label>
              <input type="date" id="arrivelDate" name="arrivelDate" [(ngModel)]="arrivelDate" style="padding: 8px; width: calc(100% - 30px); border: 1px solid #ccc; border-radius: 5px; display: inline-block;">
          
              <br>
          
              <button type="submit" class="btn btn-primary" style="display: block; width: calc(100% - 30px); padding: 10px; border: none; border-radius: 5px; background-color: #007bff; color: white;">Search</button>
          
          </form>
          
          
    <table class="table table-light table-hover" style="width: 100%;">
        <thead>
            <tr>
              <th >#</th>
              <th >status</th>
              <th >Departuredate</th>
              <th >Arrivaldate</th>
             
              <th>From Airport</th>
              <th>To Airport</th>

              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let f of fly.flight; index as i" >
              <th >{{i+1}}</th>
              <td>{{f.status}}</td>
              <td>{{f.departuredate | date:'short'}}</td>
              <td>{{f.arrivaldate | date:'short'}}</td>
              
              <td>{{f.fromAirportName}}</td>
          <td>{{f.toAirportName}}</td>
              <td>
                <button style="margin-right: 5px; margin-bottom: 5px;" (click)="openDeleteDialog(f.flightid)" mat-raised-button color="warn" >Delete</button>
                <button (click)="openUpdateDialog(f)" mat-raised-button color="primary">Update</button>
                <button (click)="gitItById(f.flightid)" title="Show More Details" mat-raised-button style="background-color: orange; color: white; margin-left: 5px;">
                  <mat-icon>visibility</mat-icon>
                  Show Details
              </button>
                            </td>
            </tr>
            
          </tbody>
      </table>
</div> 
<app-footer style="position: absolute;right: 0;left: 0;bottom: 0;margin-top: 25px;"></app-footer>
</div>

<ng-template #getId style="display: flex; justify-content: center; align-items: center; height: 100vh; overflow: auto;">
  <table class="table table-light table-hover" style="width: 100%;">
    <thead>
      <tr>
        <th style="display: inline-block; width: 10%;">Capacity</th>
        <th style="display: inline-block; width: 10%;">Status</th>
        <th style="display: inline-block; width: 10%;">Price</th>
        <th style="display: inline-block; width: 10%;">Departure Date</th>
        <th style="display: inline-block; width: 10%;">Arrival Date</th>
        <th style="display: inline-block; width: 20%;">Description</th>
        <th style="display: inline-block; width: 10%;">From Country</th>
        <th style="display: inline-block; width: 10%;">To Country</th>
        <th style="display: inline-block; width: 10%;">Travel Class</th>
        <th style="display: inline-block; width: 10%;">Image</th>

      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="display: inline-block; width: 10%;">{{flightData.capacity}}</td>
        <td style="display: inline-block; width: 10%;">{{flightData.status}}</td>
        <td style="display: inline-block; width: 10%;">{{flightData.price}}</td>
        <td style="display: inline-block; width: 10%;">{{flightData.departuredate}}</td>
        <td style="display: inline-block; width: 10%;">{{flightData.arrivaldate}}</td>
        <td style="display: inline-block; width: 20%;">{{flightData.description}}</td>
        <td style="display: inline-block; width: 10%;">{{flightData.fromcountry}}</td>
        <td style="display: inline-block; width: 10%;">{{flightData.tocountry}}</td>
        <td style="display: inline-block; width: 10%;">{{flightData.travelclass}}</td>
        <td><img style="width: 60px;height: 60px;" src="../../../assets/ApiImage/{{flightData.image}}"></td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #deleteDialog>
<h1 mat-dialog-title>Delete Flight</h1>
<div mat-dialog-content>
  Would you like to delete this Flight?
</div>
<div mat-dialog-actions>
  <button style="background-color: red; color: white;" mat-button mat-dialog-close="yes">Delete</button>
  <button style="background-color: red; color: white;" mat-button mat-dialog-close="no" cdkFocusInitial>Cancel</button>
</div>
</ng-template>


<ng-template #updateDialog class="update-dialog">
    <!-- <h6 style="text-align: center;" mat-dialog-title>Update Airport</h6> -->
    <form [formGroup]="updateForms">
    <p>
        <mat-form-field appearance="fill">
          <input type="number" formControlName="capacity" [(ngModel)]="data.capacity" matInput >
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input type="text" formControlName="status" [(ngModel)]="data.status" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input type="number" type="number" formControlName="price" [(ngModel)]="data.price" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input type="text" formControlName="description" [(ngModel)]="data.description" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input type="text" formControlName="fromcountry" [(ngModel)]="data.fromcountry" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input type="text" formControlName="tocountry" [(ngModel)]="data.tocountry" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input type="text" formControlName="travelclass" [(ngModel)]="data.travelclass" matInput placeholder="Placeholder">
        </mat-form-field>
      </p>
      <mat-form-field appearance="fill">
      <select class="form-select" aria-label="Default select example" formControlName="fromid" [(ngModel)]="data.fromid">
        <option *ngFor="let air of airport.airports" [value]="air.airportid">{{air.name}}</option>
      </select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <select class="form-select" aria-label="Default select example" formControlName="toid" [(ngModel)]="data.toid">
        <option *ngFor="let air of airport.airports" [value]="air.airportid">{{air.name}}</option>
      </select>
    </mat-form-field>
      
        <mat-form-field appearance="fill">
          <input type="datetime-local" formControlName="departuredate" [(ngModel)]="data.departuredate" matInput placeholder="Placeholder">
        </mat-form-field>
      
      
      
      
        <mat-form-field appearance="fill">
          <input type="datetime-local" formControlName="arrivaldate" [(ngModel)]="data.arrivaldate" matInput placeholder="Placeholder">
        </mat-form-field>
      
      <div>
        <!-- <input type="file" #file formControlName="image" (change)="uploadImage(file.files)" > -->
        <div class="file-upload">
          <label for="image-upload" class="file-label">
            <i class="fas fa-upload"></i> Upload Image
          </label>
          <input type="file" #file accept="image/*" id="image-upload" formControlName="image" (change)="uploadImage(file.files)">
        </div>
      </div>
    </form>
    <div mat-dialog-actions>
      <button style="background-color: blue; color: white;" (click)="updateFlight()" mat-button mat-dialog-close="yes">Update</button>
      <button style="background-color: red; color: white;" mat-button mat-dialog-close="no" cdkFocusInitial>Cancel</button>
    </div>
</ng-template>



    <ng-template #createDialog class="" >
      
      <h1 style="text-align: center; margin: 0;" mat-dialog-title>Add Airport</h1>
      <form class="formAddFlight" [formGroup]="createForms" style="max-height: 85vh;overflow: auto;">
        <p>
            <mat-form-field appearance="fill">
              <mat-label>capacity</mat-label>
              <input type="text" formControlName="capacity" matInput placeholder="capacity">
           
            </mat-form-field>
          </p>
          <p>
            <mat-form-field appearance="outline">
              <mat-label>status</mat-label>
              <input type="text" formControlName="status" matInput placeholder="status" >
            </mat-form-field>
          </p>
          <p>
            <mat-form-field appearance="outline">
              <mat-label>price</mat-label>
              <input type="text" formControlName="price" matInput placeholder="price">
              
            </mat-form-field>
          </p>
          <p>
            <mat-form-field appearance="outline">
              <mat-label>description</mat-label>
              <input type="text" formControlName="description" matInput placeholder="description">

            </mat-form-field>
          </p>
          <p>
            <mat-form-field appearance="outline">
              <mat-label>fromcountry</mat-label>
              <input type="text" formControlName="fromcountry" matInput placeholder="fromcountry">
   
            </mat-form-field>
          </p>
          <p>
            <mat-form-field appearance="fill">
              <mat-label>tocountry</mat-label>
              <input type="text" formControlName="tocountry" matInput placeholder="tocountry">
        
            </mat-form-field>
          </p>
          <p>
            <mat-form-field appearance="outline">
              <mat-label>travelclass</mat-label>
              <input type="text" formControlName="travelclass" matInput placeholder="travelclass">
              
            </mat-form-field>
          </p>
          <mat-form-field appearance="outline">
          <select class="form-select" aria-label="Default select example" formControlName="fromid" [(ngModel)]="data.fromid">
            <option *ngFor="let air of airport.airports" [value]="air.airportid">{{air.name}}</option>
          </select>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <select class="form-select" aria-label="Default select example" formControlName="toid" [(ngModel)]="data.toid">
            <option *ngFor="let air of airport.airports" [value]="air.airportid">{{air.name}}</option>
          </select>
        </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>departuredate</mat-label>
              <input type="date" formControlName="departuredate" matInput >
             
            </mat-form-field>
          
          <p>
            <mat-form-field appearance="fill">
              <mat-label>arrivaldate</mat-label>
              
              <input type="date" formControlName="arrivaldate" matInput width="300px">
            
            </mat-form-field>
          </p>
            <div name="button">
              <div class="file-upload">
                <label for="image-upload" class="file-label">
                  <i class="fas fa-upload"></i> Upload Image
                </label>
                <input type="file" #file accept="image/*" id="image-upload" formControlName="image" (change)="uploadImage(file.files)">
              </div>
                      
        </div>

            <div name="button" mat-dialog-actions>
              <button style="background-color: #04aa6d;color:#fff" (click)="createFlight()" mat-button [mat-dialog-close]="true">Add</button>
              <button style="background-color: red;color:#fff" mat-button mat-dialog-close="no" cdkFocusInitial>Cancel</button>
            </div>
        </form>
     
        </ng-template> 